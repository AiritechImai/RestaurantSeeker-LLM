# RestaurantSeeker-LLM API設定ガイド

## APIキー取得手順

### 1. ホットペッパーAPI

#### 取得方法
1. リクルートWebサービスにアクセス: https://webservice.recruit.co.jp/
2. 「新規ユーザー登録」をクリック
3. 個人情報を入力してアカウント作成
4. ログイン後、「APIキー発行」を選択
5. 「ホットペッパーグルメサーチAPI」を選択
6. 利用規約に同意してAPIキーを発行

#### 特徴
- **無料**: 月10,000リクエストまで無料
- **即時発行**: 登録後すぐに利用可能
- **機能**: レストラン検索、詳細情報取得、写真データ

### 2. 食べログAPI

#### 取得方法
1. 食べログAPIサイトにアクセス（要確認 - 現在公式APIは提供されていない可能性）
2. 開発者アカウント登録
3. API利用申請
4. 審査（3-4営業日）
5. 承認後にAPIキー発行

#### 特徴
- **審査制**: 申請から承認まで3-4日
- **有料プランあり**: 詳細な評価データにアクセス
- **機能**: レストラン情報、評価・口コミデータ

## 環境変数の設定

### 1. .envファイルの作成
```bash
# .env.exampleをコピーして.envを作成
cp backend/.env.example backend/.env
```

### 2. APIキーの設定
`.env`ファイルを編集して取得したAPIキーを設定：

```bash
# ホットペッパーAPI
HOTPEPPER_API_KEY=your_actual_hotpepper_api_key_here

# 食べログAPI
TABELOG_API_KEY=your_actual_tabelog_api_key_here

# LLM設定（必要に応じて変更）
LLM_ENDPOINT=http://localhost:11434/api/generate
LLM_MODEL=gpt-oss-20b

# デバッグ設定
DEBUG=True
FLASK_ENV=development
```

## API利用制限

### ホットペッパーAPI
- **無料プラン**: 10,000リクエスト/月
- **レート制限**: 1秒間に3リクエスト
- **データ**: 店舗情報、写真、基本データ

### 食べログAPI
- **詳細要確認**: 公式APIの提供状況を確認
- **代替案**: スクレイピングも検討（利用規約に注意）

## テスト方法

### 1. サーバー起動
```bash
cd backend
python app.py
```

### 2. API動作確認
ブラウザで http://localhost:5003/health にアクセスして動作確認

### 3. 検索テスト
フロントエンド（http://localhost:3000）で検索を実行

## トラブルシューティング

### APIキーが設定されていない場合
- コンソールに「API key not configured」と表示
- サンプルデータが使用される
- `.env`ファイルの設定を確認

### APIリクエストエラー
- 「API request error」と表示される場合
- APIキーの有効性を確認
- リクエスト制限を確認
- ネットワーク接続を確認

### レスポンスが空の場合
- 検索条件を変更してテスト
- APIのドキュメントでパラメータを確認
- ログを確認してエラーメッセージを調査

## 注意事項

1. **APIキーの管理**
   - `.env`ファイルをGitにコミットしない
   - 本番環境では環境変数で管理

2. **利用規約の遵守**
   - 各API提供者の利用規約を必ず確認
   - レート制限を守る
   - 商用利用の場合は別途契約が必要な場合あり

3. **エラーハンドリング**
   - APIが利用できない場合はサンプルデータで動作
   - ユーザーには適切なエラーメッセージを表示